<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML//EN">
<html> <head>
<title>Canio - Functional Canvas Lib</title>
<script src="lib/jquery-1.7.2.min.js"></script>
<script src="lib/ImageFilters.js"></script>
<script src="lib/main.js"></script>
<script src="lib/example.js"></script>
</head>
<style type="text/css">
body {width: 1200px}
code { display: block; unicode-bidi: embed; font-family: monospace; white-space: pre; background-color:lightgray; margin:5px; padding: 5px; }
.code { unicode-bidi: embed; font-family: monospace; white-space: pre; background-color:lightgray; }
</style>
<body>
<h1>Canio - Functional Canvas Photo Effects Lib</h1>
<h2>MIT License</h2>
<p>Canio (Canvas I/O) is a
<ul>
  <li>Functional</li>
  <li>HTML5 Canvas Element</li>
  <li>Photo Effects</li>
  <li>CoffeeScript Libarary</li>
</ul>

Canio focuses on reuseability. Canio wastes Canvases like crazy. You put an canvas in ther, a canvas comes out. But hey, not the same canvas, but a complete new one. So cool. Yes, this is a waste of canvases, but it makes code reusability so much easiere.


</p>
<hr>
<h3>
The Script</h3>
Even though Canio (in it's minified form) works dependency less, for
the examples below we use jQuery
<code>&lt;script src="jquery-1.7.2.min.js"&gt;&lt;/script&gt;
&lt;script src="$PATH_TO_CANIO/lib/min.js"&gt;&lt;/script&gt;
</code>
Oh, all examples are ofcourse written in CoffeeScript.



</hr>
<hr>
<h3>An Image</h3>
First we need an Image
<div><img src="test.png" id="testimage"></div>
<code>&lt;img src="test.png" id="testimage" &gt;</code><br>
Yeah, that's me sitting on a rock in Colombia.
<hr>
<h3>Canio.byImage(img, callback)</h3>
First we turn an image into a canvas. (<strong>&darr;</strong> That's a Canvas!) 
<div id="byImage_placeholder"></div>
<code># example-code 1
# the window.load event fires after everything (especially the images)
# are ready
$(window).load(() ->
  #getting the image element
  img = $('#testimage')[0] 
  # rendering the canvas
  # into the &lt;div id="byImage_placeholder"&gt;&lt;/div&gt; element
  Canio.byImage(img,(c)->$('#byImage_placeholder').html(c)) 
)
</code>
<hr>
<h3>Canio.resize(canvas, max_width, max_height, min_width,
min_height, resize_preference, callback)</h3>
<div id="resize_placeholder"></div>
<code>  #example-code 2
  Canio.byImage(img,(c)->
    Canio.resize(c, 400,300, 200, 100, (c) ->
      c.id='resizedcanvas'
      $('#resize_placeholder').html(c)
      )
    )
</code>
<hr>
<h3>on('canvasready')</h3>
In this tutorial, as in real life, we do not want to create canvases out of the same image over and over again, in the same time we don't want to go to callback-hell. Throwing a custom event when a canvas is ready helps (a little). 

<code>  #example-code 3
  img = $('#testimage')[0]
  $(img).on('canvasready', (event,c)->
    Canio.resize(c, 400, 300, 200, 100, (c) ->
      c.id='resizedcanvas'
      $('#resize_placeholder').html(c)
      )
    )

  Canio.byImage(img,(c) ->
    c.id='canvasbyimage'
    $('#byImage_placeholder').html(c)
    $(img).trigger('canvasready', c)
    )
</code>
Basically we fire a "<b>canvasready</b>" event after the image was successfully transformed into a canvas. The event forwards the newly created canvas to the function. I (still) love jQuery, but i didn't want to bring in any jQuery dependencies - so you have, if you want to, implement the <span class="code">trigger('canvasready', c)</span> logic yourself. just keep in mind, that "example-code 2" and "example-code 3" basically do the same stuff. It's just a question of style and application logic.
<p class="note">
<b>Note:</b> What is <span class="code">c.id='resizedcanvas'</span> and <span class="code">c.id='canvascool'</span> actuall doing? Well, what it says, it sets the  <span class="code">id=""</span> attribute of the new canvas tag. Why is this important? Oh boy, we are taking a deep dive into the Canio lib now. To keep it simple. Every time a new canvas gets created (with every functionc call) it sets the custom <span class="code">origin=""</span> attribute of the canvas tag, to the last  <span class="code">id=""</span> attribute it encountered. Withthe <span class="code">origin=""</span> attribute the canvas basically know the id of its father (if he had a name, otherwise he knows the name of its grandfather or grand-grandfather ...). As live is much simple if every element has a unique id, it's best partice to set a unique id as soon as you display an element on-page (and especially if you want to reuse it as input later).
i.e.: the canvas of "example-code 3" has the html code <span class="code">&lt;canvas width="400" height="300" origin="canvasbyimage" id="resizedcanvas"&gt;&lt;/canvas&gt;</span>
</p>






<br><br><br>
<hr>
<!-- hhmts start -->Last modified: Fri Apr 27 23:59:31 EST 2012 <!-- hhmts end -->
</body> </html>
