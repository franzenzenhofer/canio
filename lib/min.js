var ImageFilters={utils:{initSampleCanvas:function(){var a=document.createElement("canvas"),b=a.getContext("2d");a.width=0;a.height=0;ImageFilters.getSamplecanvas=function(){return a};this.getSampleContext=function(){return b};this.createImageData=b.createImageData?function(a,d){return b.createImageData(a,d)}:function(a,b){return new ImageData(a,b)}},getSampleCanvas:function(){this.initSampleCanvas();return ImageFilters.getSamplecanvas()},getSampleContext:function(){this.initSampleCanvas();return this.getSampleContext()},
createImageData:function(a,b){this.initSampleCanvas();return this.createImageData(a,b)},clamp:function(a){return 255<a?255:0>a?0:a},buildMap:function(a){for(var b=[],c=0,d;256>c;c+=1)b[c]=255<(d=a(c))?255:0>d?0:d|0;return b},applyMap:function(a,b,c){for(var d=0,g=a.length;d<g;d+=4)b[d]=c[a[d]],b[d+1]=c[a[d+1]],b[d+2]=c[a[d+2]],b[d+3]=a[d+3]},mapRGB:function(a,b,c){this.applyMap(a,b,this.buildMap(c))},getPixelIndex:function(a,b,c,d,g){if(0>a||a>=c||0>b||b>=d)switch(g){case 1:a=0>a?0:a>=c?c-1:a;b=0>
b?0:b>=d?d-1:b;break;case 2:a=0>(a%=c)?a+c:a;b=0>(b%=d)?b+d:b;break;default:return null}return b*c+a<<2},getPixel:function(a,b,c,d,g,i){if(0>b||b>=d||0>c||c>=g)switch(i){case 1:b=0>b?0:b>=d?d-1:b;c=0>c?0:c>=g?g-1:c;break;case 2:b=0>(b%=d)?b+d:b;c=0>(c%=g)?c+g:c;break;default:return 0}b=c*d+b<<2;return a[b+3]<<24|a[b]<<16|a[b+1]<<8|a[b+2]},getPixelByIndex:function(a,b){return a[b+3]<<24|a[b]<<16|a[b+1]<<8|a[b+2]},copyBilinear:function(a,b,c,d,g,i,l,n){var h=0>b?b-1|0:b|0,o=0>c?c-1|0:c|0,b=b-h,c=c-
o,f,m=0,j=0,p=0;f=0;if(0<=h&&h<d-1&&0<=o&&o<g-1)if(f=o*d+h<<2,b||c)m=a[f+3]<<24|a[f]<<16|a[f+1]<<8|a[f+2],f+=4,j=a[f+3]<<24|a[f]<<16|a[f+1]<<8|a[f+2],f=f-8+(d<<2),p=a[f+3]<<24|a[f]<<16|a[f+1]<<8|a[f+2],f+=4,f=a[f+3]<<24|a[f]<<16|a[f+1]<<8|a[f+2];else{i[l]=a[f];i[l+1]=a[f+1];i[l+2]=a[f+2];i[l+3]=a[f+3];return}else if(m=this.getPixel(a,h,o,d,g,n),b||c)j=this.getPixel(a,h+1,o,d,g,n),p=this.getPixel(a,h,o+1,d,g,n),f=this.getPixel(a,h+1,o+1,d,g,n);else{i[l]=m>>16&255;i[l+1]=m>>8&255;i[l+2]=m&255;i[l+3]=
m>>24&255;return}n=1-b;h=1-c;a=((m>>16&255)*n+(j>>16&255)*b)*h+((p>>16&255)*n+(f>>16&255)*b)*c;d=((m>>8&255)*n+(j>>8&255)*b)*h+((p>>8&255)*n+(f>>8&255)*b)*c;g=((m&255)*n+(j&255)*b)*h+((p&255)*n+(f&255)*b)*c;b=((m>>24&255)*n+(j>>24&255)*b)*h+((p>>24&255)*n+(f>>24&255)*b)*c;i[l]=255<a?255:0>a?0:a|0;i[l+1]=255<d?255:0>d?0:d|0;i[l+2]=255<g?255:0>g?0:g|0;i[l+3]=255<b?255:0>b?0:b|0},rgbToHsl:function(a,b,c){var a=a/255,b=b/255,c=c/255,d=a>b?a>c?a:c:b>c?b:c,g=a<b?a<c?a:c:b<c?b:c,i=d-g,l=0,n=0,h=(g+d)/2;
0!==i&&(l=(a===d?(b-c)/i+(b<c?6:0):b===d?(c-a)/i+2:(a-b)/i+4)/6,n=0.5<h?i/(2-d-g):i/(d+g));return[l,n,h]},hslToRgb:function(a,b,c){var d;d=[];if(0===b)d=b=c=255*c+0.5|0,d=[d,b,c];else for(var b=0.5>=c?c*(b+1):c+b-c*b,c=2*c-b,a=a+1/3,g,i=0;3>i;i+=1)0>a?a+=1:1<a&&(a-=1),g=1>6*a?c+6*(b-c)*a:1>2*a?b:2>3*a?c+6*(b-c)*(2/3-a):c,d[i]=255*g+0.5|0,a-=1/3;return d}},Translate:function(){},Scale:function(){},Rotate:function(){},Affine:function(){},UnsharpMask:function(){},ConvolutionFilter:function(a,b,c,d,g,
i,l,n,h,o){var f=a.data,m=a.width,a=a.height,j=ImageFilters.utils.createImageData(m,a),p=j.data,g=g||1,i=i||0;!1!==l&&(l=!0);!1!==n&&(n=!0);for(var h=h||0,q=0,b=b>>1,c=c>>1,s=h>>16&255,k=h>>8&255,h=h&255,o=255*(o||0),e=0;e<a;e+=1)for(var r=0;r<m;r+=1,q+=4){for(var u=0,t=0,F=0,E=0,D=!1,A=0,B,z=-b;z<=b;z+=1){var w=e+z,G;0<=w&&w<a?G=w*m:n?G=e*m:D=!0;for(w=-c;w<=c;w+=1){var C=d[A++];if(0!==C){var H=r+w;0<=H&&H<m||(n?H=r:D=!0);D?(u+=C*s,t+=C*k,F+=C*h,E+=C*o):(H=G+H<<2,u+=C*f[H],t+=C*f[H+1],F+=C*f[H+2],
E+=C*f[H+3])}}}p[q]=255<(B=u/g+i)?255:0>B?0:B|0;p[q+1]=255<(B=t/g+i)?255:0>B?0:B|0;p[q+2]=255<(B=F/g+i)?255:0>B?0:B|0;p[q+3]=l?f[q+3]:255<(B=E/g+i)?255:0>B?0:B|0}return j},Binarize:function(a,b){var c=a.data,d=c.length,g=ImageFilters.utils.createImageData(a.width,a.height),i=g.data;isNaN(b)&&(b=0.5);for(var b=255*b,l=0;l<d;l+=4)i[l]=i[l+1]=i[l+2]=c[l]+c[l+1]+c[l+2]/3<=b?0:255,i[l+3]=255;return g},BlendAdd:function(a,b){for(var c=a.data,d=c.length,g=ImageFilters.utils.createImageData(a.width,a.height),
i=g.data,l=b.data,n,h=0;h<d;h+=4)i[h]=255<(n=c[h]+l[h])?255:n,i[h+1]=255<(n=c[h+1]+l[h+1])?255:n,i[h+2]=255<(n=c[h+2]+l[h+2])?255:n,i[h+3]=255;return g},BlendSubtract:function(a,b){for(var c=a.data,d=c.length,g=ImageFilters.utils.createImageData(a.width,a.height),i=g.data,l=b.data,n,h=0;h<d;h+=4)i[h]=0>(n=c[h]-l[h])?0:n,i[h+1]=0>(n=c[h+1]-l[h+1])?0:n,i[h+2]=0>(n=c[h+2]-l[h+2])?0:n,i[h+3]=255;return g}};
ImageFilters.BoxBlur=function(){var a=function(a,c,d,g,i){var l=2*i+1,n=i+1,h=d-1,o,f,m,j=0,p,q,s,k,e,r=[];k=0;for(o=256*l;k<o;k+=1)r[k]=k/l|0;for(e=0;e<g;e+=1){l=o=f=m=0;p=e;q=j<<2;l+=n*a[q];o+=n*a[q+1];f+=n*a[q+2];m+=n*a[q+3];for(k=1;k<=i;k+=1)q=j+(k<d?k:h)<<2,l+=a[q],o+=a[q+1],f+=a[q+2],m+=a[q+3];for(k=0;k<d;k+=1)q=p<<2,c[q]=r[l],c[q+1]=r[o],c[q+2]=r[f],c[q+3]=r[m],q=k+n,q>h&&(q=h),s=k-i,0>s&&(s=0),q=j+q<<2,s=j+s<<2,l+=a[q]-a[s],o+=a[q+1]-a[s+1],f+=a[q+2]-a[s+2],m+=a[q+3]-a[s+3],p+=g;j+=d}};return function(b,
c,d,g){for(var i=b.data,l=b.width,b=b.height,n=ImageFilters.utils.createImageData(l,b),h=n.data,o=ImageFilters.utils.createImageData(l,b).data,f=0;f<g;f+=1)a(f?h:i,o,l,b,c),a(o,h,b,l,d);return n}}();
ImageFilters.GaussianBlur=function(a,b){var c,d,g;switch(b){case 2:c=5;d=[1,1,2,1,1,1,2,4,2,1,2,4,8,4,2,1,2,4,2,1,1,1,2,1,1];g=52;break;case 3:c=7;d=[1,1,2,2,2,1,1,1,2,2,4,2,2,1,2,2,4,8,4,2,2,2,4,8,16,8,4,2,2,2,4,8,4,2,2,1,2,2,4,2,2,1,1,1,2,2,2,1,1];g=140;break;case 4:c=15;d=[2,2,3,4,5,5,6,6,6,5,5,4,3,2,2,2,3,4,5,7,7,8,8,8,7,7,5,4,3,2,3,4,6,7,9,10,10,11,10,10,9,7,6,4,3,4,5,7,9,10,12,13,13,13,12,10,9,7,5,4,5,7,9,11,13,14,15,16,15,14,13,11,9,7,5,5,7,10,12,14,16,17,18,17,16,14,12,10,7,5,6,8,10,13,15,
17,19,19,19,17,15,13,10,8,6,6,8,11,13,16,18,19,20,19,18,16,13,11,8,6,6,8,10,13,15,17,19,19,19,17,15,13,10,8,6,5,7,10,12,14,16,17,18,17,16,14,12,10,7,5,5,7,9,11,13,14,15,16,15,14,13,11,9,7,5,4,5,7,9,10,12,13,13,13,12,10,9,7,5,4,3,4,6,7,9,10,10,11,10,10,9,7,6,4,3,2,3,4,5,7,7,8,8,8,7,7,5,4,3,2,2,2,3,4,5,5,6,6,6,5,5,4,3,2,2];g=2044;break;default:c=3,d=[1,2,1,2,4,2,1,2,1],g=16}return ImageFilters.ConvolutionFilter(a,c,c,d,g,0,!1)};
ImageFilters.StackBlur=function(){function a(){this.a=this.b=this.g=this.r=0;this.next=null}var b=[512,512,456,512,328,456,335,512,405,328,271,456,388,335,292,512,454,405,364,328,298,271,496,456,420,388,360,335,312,292,273,512,482,454,428,405,383,364,345,328,312,298,284,271,259,496,475,456,437,420,404,388,374,360,347,335,323,312,302,292,282,273,265,512,497,482,468,454,441,428,417,405,394,383,373,364,354,345,337,328,320,312,305,298,291,284,278,271,265,259,507,496,485,475,465,456,446,437,428,420,412,
404,396,388,381,374,367,360,354,347,341,335,329,323,318,312,307,302,297,292,287,282,278,273,269,265,261,512,505,497,489,482,475,468,461,454,447,441,435,428,422,417,411,405,399,394,389,383,378,373,368,364,359,354,350,345,341,337,332,328,324,320,316,312,309,305,301,298,294,291,287,284,281,278,274,271,268,265,262,259,257,507,501,496,491,485,480,475,470,465,460,456,451,446,442,437,433,428,424,420,416,412,408,404,400,396,392,388,385,381,377,374,370,367,363,360,357,354,350,347,344,341,338,335,332,329,326,
323,320,318,315,312,310,307,304,302,299,297,294,292,289,287,285,282,280,278,275,273,271,269,267,265,263,261,259],c=[9,11,12,13,13,14,14,15,15,15,15,16,16,16,16,17,17,17,17,17,17,17,18,18,18,18,18,18,18,18,18,19,19,19,19,19,19,19,19,19,19,19,19,19,19,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,23,23,
23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24];return function(d,g){var i=d.width,l=d.height,n=ImageFilters.Clone(d),h=n.data,o,f,m,j,p,q,s,k,e,r,u,t,F,E,D,A,B,z,w,G,C,H,
J;o=g+g+1;var O=i-1,P=l-1,I=g+1,K=I*(I+1)/2,N=new a,v=N,Q,L=b[g],M=c[g];for(m=1;m<o;m+=1)v=v.next=new a,m==I&&(Q=v);v.next=N;for(f=q=p=0;f<l;f+=1){D=A=B=z=s=k=e=r=0;u=I*(w=h[p]);t=I*(G=h[p+1]);F=I*(C=h[p+2]);E=I*(H=h[p+3]);s+=K*w;k+=K*G;e+=K*C;r+=K*H;v=N;for(m=0;m<I;m+=1)v.r=w,v.g=G,v.b=C,v.a=H,v=v.next;for(m=1;m<I;m+=1)j=p+((O<m?O:m)<<2),s+=(v.r=w=h[j])*(J=I-m),k+=(v.g=G=h[j+1])*J,e+=(v.b=C=h[j+2])*J,r+=(v.a=H=h[j+3])*J,D+=w,A+=G,B+=C,z+=H,v=v.next;m=N;v=Q;for(o=0;o<i;o+=1)h[p]=s*L>>M,h[p+1]=k*L>>
M,h[p+2]=e*L>>M,h[p+3]=r*L>>M,s-=u,k-=t,e-=F,r-=E,u-=m.r,t-=m.g,F-=m.b,E-=m.a,j=q+((j=o+g+1)<O?j:O)<<2,D+=m.r=h[j],A+=m.g=h[j+1],B+=m.b=h[j+2],z+=m.a=h[j+3],s+=D,k+=A,e+=B,r+=z,m=m.next,u+=w=v.r,t+=G=v.g,F+=C=v.b,E+=H=v.a,D-=w,A-=G,B-=C,z-=H,v=v.next,p+=4;q+=i}for(o=0;o<i;o+=1){A=B=z=D=k=e=r=s=0;p=o<<2;u=I*(w=h[p]);t=I*(G=h[p+1]);F=I*(C=h[p+2]);E=I*(H=h[p+3]);s+=K*w;k+=K*G;e+=K*C;r+=K*H;v=N;for(m=0;m<I;m+=1)v.r=w,v.g=G,v.b=C,v.a=H,v=v.next;j=i;for(m=1;m<=g;m+=1)p=j+o<<2,s+=(v.r=w=h[p])*(J=I-m),k+=
(v.g=G=h[p+1])*J,e+=(v.b=C=h[p+2])*J,r+=(v.a=H=h[p+3])*J,D+=w,A+=G,B+=C,z+=H,v=v.next,m<P&&(j+=i);p=o;m=N;v=Q;for(f=0;f<l;f+=1)j=p<<2,h[j]=s*L>>M,h[j+1]=k*L>>M,h[j+2]=e*L>>M,h[j+3]=r*L>>M,s-=u,k-=t,e-=F,r-=E,u-=m.r,t-=m.g,F-=m.b,E-=m.a,j=o+((j=f+I)<P?j:P)*i<<2,s+=D+=m.r=h[j],k+=A+=m.g=h[j+1],e+=B+=m.b=h[j+2],r+=z+=m.a=h[j+3],m=m.next,u+=w=v.r,t+=G=v.g,F+=C=v.b,E+=H=v.a,D-=w,A-=G,B-=C,z-=H,v=v.next,p+=i}return n}}();
ImageFilters.Brightness=function(a,b){var c=a.data,d=ImageFilters.utils.createImageData(a.width,a.height);ImageFilters.utils.mapRGB(c,d.data,function(a){a+=b;return 255<a?255:a});return d};
ImageFilters.BrightnessContrastGimp=function(a,b,c){for(var d=a.data,g=d.length,a=ImageFilters.utils.createImageData(a.width,a.height),i=a.data,l=Math.PI/4,b=b/100,c=0.99*c,c=c/100,c=Math.tan((c+1)*l),n=0,l=0;l<g;l+=4)n+=19595*d[l]+38470*d[l+1]+7471*d[l+2]>>16;n/=g/4;ImageFilters.utils.mapRGB(d,i,function(a){0>b?a*=1+b:0<b&&(a+=(255-a)*b);0!==c&&(a=(a-n)*c+n);return a+0.5|0});return a};
ImageFilters.BrightnessContrastPhotoshop=function(a,b,c){var d=a.data,a=ImageFilters.utils.createImageData(a.width,a.height),g=a.data,b=(b+100)/100,c=(c+100)/100;ImageFilters.utils.mapRGB(d,g,function(a){a*=b;a=(a-127.5)*c+127.5;return a+0.5|0});return a};
ImageFilters.Channels=function(a,b){var c;switch(b){case 2:c=[0,1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0,0,1,0];break;case 3:c=[0,0,1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0,1,0];break;default:c=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0,0,0,1,0]}return this.ColorMatrixFilter(a,c)};ImageFilters.Clone=function(a){return this.Copy(a,ImageFilters.utils.createImageData(a.width,a.height))};
ImageFilters.CloneBuiltin=function(a){var b=a.width,c=a.height,d=ImageFilters.utils.getSampleCanvas(),g=ImageFilters.utils.getSampleContext();d.width=b;d.height=c;g.putImageData(a,0,0);a=g.getImageData(0,0,b,c);d.width=0;d.height=0;return a};
ImageFilters.ColorMatrixFilter=function(a,b){var c=a.data,d=c.length,g=ImageFilters.utils.createImageData(a.width,a.height),i=g.data,l=b[0],n=b[1],h=b[2],o=b[3],f=b[4],m=b[5],j=b[6],p=b[7],q=b[8],s=b[9],k=b[10],e=b[11],r=b[12],u=b[13],t=b[14],F=b[15],E=b[16],D=b[17],A=b[18],B=b[19],z,w,G,C,H,J;for(w=0;w<d;w+=4)G=c[w],C=c[w+1],H=c[w+2],J=c[w+3],i[w]=255<(z=G*l+C*n+H*h+J*o+f)?255:0>z?0:z|0,i[w+1]=255<(z=G*m+C*j+H*p+J*q+s)?255:0>z?0:z|0,i[w+2]=255<(z=G*k+C*e+H*r+J*u+t)?255:0>z?0:z|0,i[w+3]=255<(z=G*
F+C*E+H*D+J*A+B)?255:0>z?0:z|0;return g};ImageFilters.ColorTransformFilter=function(a,b,c,d,g,i,l,n,h){var o=a.data,f=o.length,a=ImageFilters.utils.createImageData(a.width,a.height),m=a.data,j,p;for(j=0;j<f;j+=4)m[j]=255<(p=o[j]*b+i)?255:0>p?0:p,m[j+1]=255<(p=o[j+1]*c+l)?255:0>p?0:p,m[j+2]=255<(p=o[j+2]*d+n)?255:0>p?0:p,m[j+3]=255<(p=o[j+3]*g+h)?255:0>p?0:p;return a};ImageFilters.Copy=function(a,b){for(var c=a.data,d=c.length,g=b.data;d--;)g[d]=c[d];return b};
ImageFilters.Crop=function(a,b,c,d,g){var i=a.data,l=a.width,n=a.height,a=ImageFilters.utils.createImageData(d,g),h=a.data,o=Math.max(b,0),f=Math.max(c,0),m=Math.min(b+d,l),g=Math.min(c+g,n),b=o-b,j,n=f;for(dstRow=f-c;n<g;n+=1,dstRow+=1){c=o;for(dstCol=b;c<m;c+=1,dstCol+=1)f=n*l+c<<2,j=dstRow*d+dstCol<<2,h[j]=i[f],h[j+1]=i[f+1],h[j+2]=i[f+2],h[j+3]=i[f+3]}return a};
ImageFilters.CropBuiltin=function(a,b,c,d,g){var i=a.width,l=a.height,n=ImageFilters.utils.getSampleCanvas(),h=ImageFilters.utils.getSampleContext();n.width=i;n.height=l;h.putImageData(a,0,0);a=h.getImageData(b,c,d,g);n.width=0;n.height=0;return a};
ImageFilters.Desaturate=function(a){for(var b=a.data,c=b.length,a=ImageFilters.utils.createImageData(a.width,a.height),d=a.data,g=0;g<c;g+=4){var i=b[g],l=b[g+1],n=b[g+2];d[g]=d[g+1]=d[g+2]=((i>l?i>n?i:n:l>n?l:n)+(i<l?i<n?i:n:l<n?l:n))/2+0.5|0;d[g+3]=b[g+3]}return a};
ImageFilters.DisplacementMapFilter=function(a,b,c,d,g,i,l,n,h){var o=a.data,f=a.width,m=a.height,a=ImageFilters.Clone(a),j=a.data;c||(c=0);d||(d=0);g||(g=0);i||(i=0);l||(l=0);n||(n=0);h||(h=2);var p=b.width,q=b.data,s=p+c,b=b.height+d,k,e,r,u,t;for(u=0;u<f;u+=1)for(t=0;t<m;t+=1)k=t*f+u<<2,u<c||t<d||u>=s||t>=b?e=k:(r=(t-d)*p+(u-c)<<2,e=q[r+g],e=u+((e-128)*l>>8),r=q[r+i],r=t+((r-128)*n>>8),e=ImageFilters.utils.getPixelIndex(e+0.5|0,r+0.5|0,f,m,h),null===e&&(e=k)),j[k]=o[e],j[k+1]=o[e+1],j[k+2]=o[e+
2],j[k+3]=o[e+3];return a};
ImageFilters.Dither=function(a,b){var c=a.width,d=a.height,g=ImageFilters.Clone(a),i=g.data,b=2>b?2:255<b?255:b,l,n=[];l=b-1;var h=0,o=0,f;for(f=0;f<b;f+=1)n[f]=255*f/l;l=ImageFilters.utils.buildMap(function(){var a=n[h];o+=b;255<o&&(o-=255,h+=1);return a});var m,j,p,q,s,k,e,r,u=c-1,t=d-1;for(m=0;m<d;m+=1)for(f=0;f<c;f+=1)if(j=m*c+f<<2,p=i[j],q=i[j+1],s=i[j+2],k=l[p],e=l[q],r=l[s],i[j]=k,i[j+1]=e,i[j+2]=r,p-=k,q-=e,s-=r,j+=4,f<u&&(r=i[j]+0.4375*p,e=i[j+1]+0.4375*q,k=i[j+2]+0.4375*s,i[j]=255<r?255:
0>r?0:r|0,i[j+1]=255<e?255:0>e?0:e|0,i[j+2]=255<k?255:0>k?0:k|0),j+=c-2<<2,0<f&&m<t&&(r=i[j]+0.1875*p,e=i[j+1]+0.1875*q,k=i[j+2]+0.1875*s,i[j]=255<r?255:0>r?0:r|0,i[j+1]=255<e?255:0>e?0:e|0,i[j+2]=255<k?255:0>k?0:k|0),j+=4,m<t&&(r=i[j]+0.3125*p,e=i[j+1]+0.3125*q,k=i[j+2]+0.3125*s,i[j]=255<r?255:0>r?0:r|0,i[j+1]=255<e?255:0>e?0:e|0,i[j+2]=255<k?255:0>k?0:k|0),j+=4,f<u&&m<t)r=i[j]+0.0625*p,e=i[j+1]+0.0625*q,k=i[j+2]+0.0625*s,i[j]=255<r?255:0>r?0:r|0,i[j+1]=255<e?255:0>e?0:e|0,i[j+2]=255<k?255:0>k?0:
k|0;return g};ImageFilters.Edge=function(a){return ImageFilters.ConvolutionFilter(a,3,3,[-1,-1,-1,-1,8,-1,-1,-1,-1])};ImageFilters.Emboss=function(a){return ImageFilters.ConvolutionFilter(a,3,3,[-2,-1,0,-1,1,1,0,1,2])};ImageFilters.Enrich=function(a){return ImageFilters.ConvolutionFilter(a,3,3,[0,-2,0,-2,20,-2,0,-2,0],10,-40)};
ImageFilters.Flip=function(a,b){var c=a.data,d=a.width,g=a.height,i=ImageFilters.utils.createImageData(d,g),l=i.data,n,h,o,f;for(h=0;h<g;h+=1)for(n=0;n<d;n+=1)o=h*d+n<<2,f=b?(g-h-1)*d+n<<2:h*d+(d-n-1)<<2,l[f]=c[o],l[f+1]=c[o+1],l[f+2]=c[o+2],l[f+3]=c[o+3];return i};ImageFilters.Gamma=function(a,b){var c=a.data,d=ImageFilters.utils.createImageData(a.width,a.height);ImageFilters.utils.mapRGB(c,d.data,function(a){a=255*Math.pow(a/255,1/b)+0.5;return 255<a?255:a+0.5|0});return d};
ImageFilters.GrayScale=function(a){for(var b=a.data,c=b.length,a=ImageFilters.utils.createImageData(a.width,a.height),d=a.data,g=0;g<c;g+=4)d[g]=d[g+1]=d[g+2]=19595*b[g]+38470*b[g+1]+7471*b[g+2]>>16,d[g+3]=b[g+3];return a};
ImageFilters.HSLAdjustment=function(a,b,c,d){var g=a.data,i=g.length,a=ImageFilters.utils.createImageData(a.width,a.height),l=a.data,b=b/360,c=c/100,d=d/100,n=ImageFilters.utils.rgbToHsl,h=ImageFilters.utils.hslToRgb,o,f,m,j;for(j=0;j<i;j+=4){m=n(g[j],g[j+1],g[j+2]);for(o=m[0]+b;0>o;)o+=1;for(;1<o;)o-=1;f=m[1]+m[1]*c;0>f?f=0:1<f&&(f=1);m=m[2];0<d?m+=(1-m)*d:0>d&&(m+=m*d);o=h(o,f,m);l[j]=o[0];l[j+1]=o[1];l[j+2]=o[2];l[j+3]=g[j+3]}return a};
ImageFilters.Invert=function(a){var b=a.data,a=ImageFilters.utils.createImageData(a.width,a.height);ImageFilters.utils.mapRGB(b,a.data,function(a){return 255-a});return a};
ImageFilters.Mosaic=function(a,b){var c=a.data,d=a.width,g=a.height,i=ImageFilters.utils.createImageData(d,g),l=i.data,n=Math.ceil(d/b),h=Math.ceil(g/b),o,f,m,j,p,q,s,k,e,r,u,t,F,E,D;for(o=0;o<h;o+=1){p=o*b;q=p+b;q>g&&(q=g);for(f=0;f<n;f+=1){m=f*b;j=m+b;j>d&&(j=d);t=F=E=D=0;u=(j-m)*(q-p);for(k=p;k<q;k+=1){e=k*d;for(s=m;s<j;s+=1)r=e+s<<2,t+=c[r],F+=c[r+1],E+=c[r+2],D+=c[r+3]}t=t/u+0.5|0;F=F/u+0.5|0;E=E/u+0.5|0;D=D/u+0.5|0;for(k=p;k<q;k+=1){e=k*d;for(s=m;s<j;s+=1)r=e+s<<2,l[r]=t,l[r+1]=F,l[r+2]=E,l[r+
3]=D}}}return i};
ImageFilters.Oil=function(a,b,c){var d=a.data,g=a.width,a=a.height,i=ImageFilters.utils.createImageData(g,a),l=i.data,n=0,h=[],o=[],f=[],m=[],j=[],p=[],q,s,k,e,r,u,t,F,E,D,A;for(s=0;s<a;s+=1)for(q=0;q<g;q+=1){for(k=0;k<c;k+=1)h[k]=o[k]=f[k]=m[k]=j[k]=p[k]=0;for(k=-b;k<=b;k+=1)if(e=s+k,!(0>e||e>=a)){u=e*g;for(e=-b;e<=b;e+=1)r=q+e,0>r||r>=g||(t=u+r<<2,r=d[t],F=d[t+1],t=d[t+2],E=r*c>>8,D=F*c>>8,A=t*c>>8,m[E]+=r,j[D]+=F,p[A]+=t,h[E]+=1,o[D]+=1,f[A]+=1)}e=u=r=0;for(k=1;k<c;k+=1)h[k]>h[e]&&(e=k),o[k]>o[u]&&
(u=k),f[k]>f[r]&&(r=k);l[n]=m[e]/h[e]|0;l[n+1]=j[u]/o[u]|0;l[n+2]=p[r]/f[r]|0;l[n+3]=d[n+3];n+=4}return i};ImageFilters.OpacityFilter=function(a,b){for(var c=a.data,d=c.length,g=ImageFilters.utils.createImageData(a.width,a.height),i=g.data,l=0;l<d;l+=4)i[l]=c[l],i[l+1]=c[l+1],i[l+2]=c[l+2],i[l+3]=b;return g};
ImageFilters.Posterize=function(a,b){var c=a.data,d=ImageFilters.utils.createImageData(a.width,a.height),g=d.data,b=2>b?2:255<b?255:b,i=[],l=b-1,n=0,h=0,o;for(o=0;o<b;o+=1)i[o]=255*o/l;ImageFilters.utils.mapRGB(c,g,function(){var a=i[n];h+=b;255<h&&(h-=255,n+=1);return a});return d};ImageFilters.Rescale=function(a,b){var c=a.data,d=ImageFilters.utils.createImageData(a.width,a.height);ImageFilters.utils.mapRGB(c,d.data,function(a){a*=b;return 255<a?255:a+0.5|0});return d};
ImageFilters.ResizeNearestNeighbor=function(a,b,c){var d=a.data,g=a.width,i=a.height,a=ImageFilters.utils.createImageData(b,c),l=a.data,n=g/b,i=i/c,h=0,o,f,m,j;for(m=0;m<c;m+=1){j=(m*i|0)*g;for(f=0;f<b;f+=1)o=j+f*n<<2,l[h]=d[o],l[h+1]=d[o+1],l[h+2]=d[o+2],l[h+3]=d[o+3],h+=4}return a};
ImageFilters.Resize=function(a,b,c){var d=a.data,g=a.width,a=a.height,i=ImageFilters.utils.createImageData(b,c),l=i.data,n=g/b,h=a/c,o=0,f,m;for(m=0;m<c;m+=1)for(f=0;f<b;f+=1)ImageFilters.utils.copyBilinear(d,f*n,m*h,g,a,l,o,0),o+=4;return i};
ImageFilters.ResizeBuiltin=function(a,b,c){var d=a.width,g=a.height,i=ImageFilters.utils.getSampleCanvas(),l=ImageFilters.utils.getSampleContext();i.width=Math.max(d,b);i.height=Math.max(g,c);l.save();l.putImageData(a,0,0);l.scale(b/d,c/g);l.drawImage(i,0,0);a=l.getImageData(0,0,b,c);l.restore();i.width=0;i.height=0;return a};
ImageFilters.Sepia=function(a){var b=a.data,c=b.length,a=ImageFilters.utils.createImageData(a.width,a.height),d=a.data,g,i,l,n,h;for(n=0;n<c;n+=4)g=b[n],i=b[n+1],l=b[n+2],d[n]=255<(h=0.393*g+0.769*i+0.189*l)?255:0>h?0:h+0.5|0,d[n+1]=255<(h=0.349*g+0.686*i+0.168*l)?255:0>h?0:h+0.5|0,d[n+2]=255<(h=0.272*g+0.534*i+0.131*l)?255:0>h?0:h+0.5|0,d[n+3]=b[n+3];return a};ImageFilters.Sharpen=function(a,b){return ImageFilters.ConvolutionFilter(a,3,3,[-b/16,-b/8,-b/16,-b/8,0.75*b+1,-b/8,-b/16,-b/8,-b/16])};
ImageFilters.Solarize=function(a){var b=a.data,a=ImageFilters.utils.createImageData(a.width,a.height);ImageFilters.utils.mapRGB(b,a.data,function(a){return 127<a?2*(a-127.5):2*(127.5-a)});return a};ImageFilters.Transpose=function(a){var b=a.data,c=a.width,a=a.height,d=ImageFilters.utils.createImageData(a,c),g=d.data,i,l;for(y=0;y<a;y+=1)for(x=0;x<c;x+=1)i=y*c+x<<2,l=x*a+y<<2,g[l]=b[i],g[l+1]=b[i+1],g[l+2]=b[i+2],g[l+3]=b[i+3];return d};
ImageFilters.Twril=function(a,b,c,d,g,i,l){var n=a.data,h=a.width,a=a.height,o=ImageFilters.utils.createImageData(h,a),f=o.data,b=h*b,c=a*c,g=g*(Math.PI/180),m=d*d,j=0,p,q,s,k,e;for(q=0;q<a;q+=1)for(p=0;p<h;p+=1)s=p-b,k=q-c,e=s*s+k*k,e>m?(f[j]=n[j],f[j+1]=n[j+1],f[j+2]=n[j+2],f[j+3]=n[j+3]):(e=Math.sqrt(e),k=Math.atan2(k,s)+g*(d-e)/d,s=b+e*Math.cos(k),e=c+e*Math.sin(k),l?ImageFilters.utils.copyBilinear(n,s,e,h,a,f,j,i):(e=(e+0.5|0)*h+(s+0.5|0)<<2,f[j]=n[e],f[j+1]=n[e+1],f[j+2]=n[e+2],f[j+3]=n[e+3])),
j+=4;return o};(function(){var a,b,c,d,g,i,l,n,h,o,f,m,j,p,q=[].slice;a={_DEBUG_:!0};g=function(a){return console.log(a)};b=function(a,k){for(;!a;)throw Error("Callback required for "+k);return[]};o=function(a){return a&&"[object Function]"===(void 0).call(a)};j=function(){var a,k;a=arguments[0];k=2<=arguments.length?q.call(arguments,1):[];a&&o(a)&&window.setTimeout.apply(window,[a,0].concat(q.call(k)));return null!=k?k[0]:void 0};i=function(){var a,k,e,b,c;c=arguments[0];a=2<=arguments.length?q.call(arguments,
1):[];k=null;b=[];for(e=0;e<c.length||e<a.length;)"function"===typeof c[e]&&!k?k=c[e]:null!==c[e]&&void 0!==c[e]?b.push(c[e]):b.push(a[e]),e+=1;k||(k=function(){return null});b.unshift(k);g(b);return b};c=function(a,k,e){null==k&&(k=0);null==e&&(e=255);return Math.min(e,Math.max(k,a))};a.getToolbox=n=function(a,k){var e,b;return j(k,[a,e=a.getContext("2d"),b=e.getImageData(0,0,a.width,a.height),b.data])};a.make=m=function(){var a,k,e,b,c;k=1<=arguments.length?q.call(arguments,0):[];a=i(k,800,600);
k=a[0];c=a[1];e=a[2];b=a[3];c.width&&c.height&&(a=c,c=a.width,e=a.height,b=(null!=a?"function"===typeof a.getAttribute?a.getAttribute("id"):void 0:void 0)||(null!=a?"function"===typeof a.getAttribute?a.getAttribute("origin"):void 0:void 0));a=document.createElement("canvas");a.width=c;a.height=e;b&&a.setAttribute("origin",b);return j(k,a)};a.newToolbox=p=function(){var b,k;b=1<=arguments.length?q.call(arguments,0):[];k=i(b);b=k[0];return a.getToolbox(m(k[1],k[2],k[3]),b)};a.copy=d=function(a,b){var e,
c;c=p(a);e=c[0];c[1].drawImage(a,0,0,a.width,a.height);return j(b,e)};a.byImage=function(s,k){if(s.width&&s.height)return d(s,k);b(k,'Canio.byImage (only if the image is not "loaded")');o(k)&&(s.onload=function(){return a.byImage(s,k)});return!0};a.byArray=function(a,b,e,c){var d,g,i;d=p(b,e);b=d[0];e=d[1];g=d[2];i=d[3];for(d=0;d<i.length;)i[d]=a[d],d+=1;e.putImageData(g,0,0);return j(c,b)};a.toImage=function(){var a,b,e,c;a=arguments[0];b=2<=arguments.length?q.call(arguments,1):[];e=i(b,"image/png");
b=e[0];c=e[1];e=new Image;e.src=a.toDataURL(c,"");return j(b,e)};a.toArray=function(a){var b,e;b=[];e=n(a)[3];Uint8Array&&(b=new Uint8Array(new ArrayBuffer(e.length)));for(a=0;a<e.length;)b[a]=e[a],a+=1;return b};a.hardResize=function(b,k,e,c){var d,g;g=a.newToolbox(k,e);d=g[0];g[1].drawImage(b,0,0,k,e);return j(c,d)};a.resize=function(){var a,b,e,c,d,f,h;a=arguments[0];b=2<=arguments.length?q.call(arguments,1):[];c={width:null,height:null};d={width:null,height:null};f=i(b,800,null,null,null,null,
null);b=f[0];c.width=f[1];c.height=f[2];d.width=f[3];d.height=f[4];e=f[5];f={width:null,height:null};"width"===e?h="height":"height"===e?h="width":a.height>a.width?(e="height",h="width",g("hochformat")):(g("height"+a.height),g("width"+a.width),e="width",h="height",g("querformat"));console.log("hallo");g("first: "+e);g("second: "+h);g(a[e]);c[e]&&(a[e]>c[e]||a[h]>c[h])?(g("a"),f[h]=a[h]*c[e]/a[e],f[e]=c[e],f[h]>c[h]&&(g("b"),f[e]=a[e]*c[h]/a[h],f[h]=c[h])):d[e]&&(a[e]<d[e]||a[h]>d[h])?(g("c"),f[e]=
a[e]*d[h]/a[h],f[h]=d[h],f[e]<d[e]&&(g("d"),f[h]=a[h]*d[e]/a[e],f[e]=d[e])):(g("e"),f[e]=a[e],f[h]=a[h],g("f"));d=p(f.width,f.height,(null!=a?a.getAttribute("id"):void 0)||(null!=a?a.getAttribute("origin"):void 0));c=d[0];d[1].drawImage(a,0,0,f.width,f.height);g("g");g(c);g(b);return j(b,c)};a.scale=function(){var a,b,e,c,d,f;a=arguments[0];b=2<=arguments.length?q.call(arguments,1):[];d=i(b,1);b=d[0];e=d[1];g("scale it by "+e);d=a.width*e;c=a.height*e;f=p(d,c,(null!=a?a.getAttribute("id"):void 0)||
(null!=a?a.getAttribute("origin"):void 0));e=f[0];f[1].drawImage(a,0,0,d,c);return j(b,e)};a.crop=function(){var a,b,e,c,d,g,f,h;a=arguments[0];b=2<=arguments.length?q.call(arguments,1):[];e=i(b,0,0,a.width/2,a.height/2);b=e[0];d=e[1];g=e[2];c=e[3];e=e[4];h=p(c,e,(null!=a?a.getAttribute("id"):void 0)||(null!=a?a.getAttribute("origin"):void 0));f=h[0];h[1].drawImage(a,d,g,c,e,0,0,c,e);return j(b,f)};a.rgba=function(){var b,c,e,d,f,h,l,m,p,A,B,z,w,G,C;e=arguments[0];d=2<=arguments.length?q.call(arguments,
1):[];g("inrgba");f=i(d,null,!1);d=f[0];h=f[1];f=f[2];g(typeof h);if(!o(h))return g("filter not a function"),!1;A=n(e);e=A[0];A=A[3];b=[e.width,e.height];w=b[0];m=b[1];g("rgba canvas size");g([w,m]);z=new Uint8Array(new ArrayBuffer(A.length));C=0;for(g("rgbabeforewhile");C<m;){for(G=0;G<w;)B=p=4*(C*w+G),l=p+1,c=p+2,b=p+3,p=f?h(A[B],A[l],A[c],A[b],p,e):h(A[B],A[l],A[c],A[b],p),z[B]=p[0],z[l]=p[1],z[c]=p[2],z[b]=p[3],G+=1;C+=1}e=a.byArray(z,w,m);g("rgba return value");g(e);return j(d,e)};a.rotateRight=
function(a,b){var e;e=p(a)[1];e.rotate(90*Math.PI/180);e.drawImage(a,0,-1*a.height);return j(b,a)};a.rotateLeft=function(a,b){var e;e=p(a)[1];e.rotate(-90*Math.PI/180);e.drawImage(a,-1*a.width,0);return j(b,a)};a.flip=function(a,b){var e;e=p(a)[1];e.rotate(Math.PI);e.drawImage(a,-1*a.width,-1*a.height);return j(b,a)};a.mirror=function(a,b){var e;e=p(a)[1];e.translate(c2.width/2,0);e.scale(-1,1);e.drawImage(a,-1*(c2.width/2),0);return j(b,a)};a.noise=function(){var a,b,e,f,g,h,l,m,o,p,B;b=arguments[0];
e=2<=arguments.length?q.call(arguments,1):[];a=i(e,20);e=a[0];a=a[1];f=n(d(b));b=f[0];h=f[1];l=f[2];m=f[3];f=p=0;for(B=m.length;p<B;f=++p){o=Math.round(a-Math.random()*a/2);for(g=0;3>g;)m[f+g]=c(o+m[f+g]),g+=1}h.putImageData(l,0,0);return j(e,b)};a.vignette=function(){var a,b,e,c,f,g,h;b=arguments[0];e=2<=arguments.length?q.call(arguments,1):[];a=i(e,0.2,0.8);e=a[0];h=a[1];a=a[2];c=n(d(b));b=c[0];f=c[1];g=Math.sqrt(Math.pow(b.width/2,2)+Math.pow(b.height/2,2));f.globalCompositeOperation="source-over";
c=f.createRadialGradient(b.width/2,b.height/2,0,b.width/2,b.height/2,g);c.addColorStop(0,"rgba(0,0,0,0)");c.addColorStop(0.65,"rgba(0,0,0,0)");c.addColorStop(1,"rgba(0,0,0,"+a+")");f.fillStyle=c;f.fillRect(0,0,b.width,b.height);f.globalCompositeOperation="lighter";c=f.createRadialGradient(b.width/2,b.height/2,0,b.width/2,b.height/2,g);c.addColorStop(0,"rgba(255,255,255,"+h+")");c.addColorStop(0.65,"rgba(255,255,255,0)");c.addColorStop(1,"rgba(0,0,0,0)");f.fillStyle=c;f.fillRect(0,0,b.width,b.height);
return j(e,b)};a.saturate=function(){var b,d,e,f;b=arguments[0];d=2<=arguments.length?q.call(arguments,1):[];f=i(d,0.3);d=f[0];e=f[1];return a.rgba(b,d,function(a,b,d,f){var k;k=(a+b+d)/3;return[c(k+e*(a-k)),c(k+e*(b-k)),c(k+e*(d-k)),f]})};a.desaturate=function(){var b,c;b=arguments[0];c=2<=arguments.length?q.call(arguments,1):[];c=i(c,0.7);return a.saturate(b,1-c[1],c[0])};a.merge=function(){var b,d,e,f;b=arguments[0];d=2<=arguments.length?q.call(arguments,1):[];g("inmerge");f=i(d,null);d=f[0];for(f=
f[1];!f;)return!1;e=a.getToolbox(a.hardResize(f,b.width,b.height))[3];return a.rgba(b,d,function(a,b,d,f,k){a=c(a*e[k]/255);b=c(b*e[k+1]/255);d=c(d*e[k+2]/255);return[a,b,d,f]})};a.hardmerge=function(){2<=arguments.length&&q.call(arguments,1)};a.negmerge=function(){var b,d,e,f;b=arguments[0];d=2<=arguments.length?q.call(arguments,1):[];g("inmerge");f=i(d,null);d=f[0];for(f=f[1];!f;)return!1;e=a.getToolbox(a.hardResize(f,b.width,b.height))[3];return a.rgba(b,d,function(a,b,d,f,k){a=c(255*(a/e[k]));
b=c(255*(b/e[k+1]));d=c(255*(d/e[k+2]));return[a,b,d,f]})};a.lightmerge=function(){var b,c,e,d;b=arguments[0];c=2<=arguments.length?q.call(arguments,1):[];d=i(c,null);c=d[0];for(d=d[1];!d;)return!1;e=a.getToolbox(a.hardResize(d,b.width,b.height))[3];return a.rgba(b,c,function(a,b,c,d,f){a=a>e[f]?a:e[f];b=b>e[f+1]?b:e[f+1];c=c>e[f+2]?c:e[f+2];return[a,b,c,d]})};a.darkmerge=function(){var b,c,e,d;b=arguments[0];c=2<=arguments.length?q.call(arguments,1):[];d=i(c,null);c=d[0];for(d=d[1];!d;)return!1;
e=a.getToolbox(a.hardResize(d,b.width,b.height))[3];return a.rgba(b,c,function(a,b,c,d,f){a=a<e[f]?a:e[f];b=b<e[f+1]?b:e[f+1];c=c<e[f+2]?c:e[f+2];return[a,b,c,d]})};l=function(a,b,c){return 0.3*a+0.59*b+0.11*c};a.lightermerge=function(){var b,c,e,d;b=arguments[0];c=2<=arguments.length?q.call(arguments,1):[];d=i(c,null);c=d[0];for(d=d[1];!d;)return!1;e=a.getToolbox(a.hardResize(d,b.width,b.height))[3];return a.rgba(b,c,function(a,b,c,d,f){var g,a=(g=l(a,b,c)>l(e[f],e[f+1],e[f+2])?!0:!1)?a:e[f],b=g?
b:e[f+1],c=g?c:e[f+2];return[a,b,c,d]})};a.darkermerge=function(){var b,c,e,d;b=arguments[0];c=2<=arguments.length?q.call(arguments,1):[];d=i(c,null);c=d[0];for(d=d[1];!d;)return!1;e=a.getToolbox(a.hardResize(d,b.width,b.height))[3];return a.rgba(b,c,function(a,b,c,d,f){var g,a=(g=l(a,b,c)<l(e[f],e[f+1],e[f+2])?!0:!1)?a:e[f],b=g?b:e[f+1],c=g?c:e[f+2];return[a,b,c,d]})};a.blend=function(){var b,d,e,f,g,h,j;d=arguments[0];e=2<=arguments.length?q.call(arguments,1):[];j=i(e,null,0.5);e=j[0];h=j[1];for(b=
j[2];!h;)return!1;g=a.getToolbox(a.hardResize(h,d.width,d.height))[3];f=1-b;return a.rgba(d,e,function(a,e,d,h,k){a=c(a*f+g[k]*b);e=c(e*f+g[k+1]*b);d=c(d*f+g[k+2]*b);return[a,e,d,h]})};a.viewfinder=function(c,d){var e;b(d,"Canio.viewfinder");e=new Image;e.onload=function(){return a.merge(c,e,d)};e.src=Caniodataurls.viewfinder;return!0};a.oldschool=function(c,d){var e;b(d,"Canio.oldschool");e=new Image;e.onload=function(){return a.lightermerge(c,e,1,d)};e.src=Caniodataurls.oldschool;return!0};a.many=
function(){var c,d,e,f,g,h,j;e=arguments[0];c=2<=arguments.length?q.call(arguments,1):[];c=i(c);f=c[0];d=c[1];h=c[2];b(f);c=null!=(g=null!=d?d.shift():void 0)?g:null;for(g=null!=(j=null!=h?h.shift():void 0)?j:[];!Array.isArray(g);)g=[g];return 0<d.length?c.apply(null,[e,function(b){return a.many(b,f,d,h)}].concat(q.call(g))):c(e,f,g)};a.nothing=function(){var b,c;b=arguments[0];c=2<=arguments.length?q.call(arguments,1):[];c=i(c)[0];return a.rgba(b,c,function(a,b,c,d){return[a,b,c,d]})};a.curve=function(){var b,
c,d;b=arguments[0];c=2<=arguments.length?q.call(arguments,1):[];c=i(c)[0];d=[0,0,0,1,1,2,3,3,3,4,4,4,5,5,5,6,6,7,7,7,7,8,8,8,9,9,9,9,10,10,10,10,11,11,12,12,12,12,13,13,13,14,14,15,15,16,16,17,17,17,18,19,19,20,21,22,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,39,40,41,42,44,45,47,48,49,52,54,55,57,59,60,62,65,67,69,70,72,74,77,79,81,83,86,88,90,92,94,97,99,101,103,107,109,111,112,116,118,120,124,126,127,129,133,135,136,140,142,143,145,149,150,152,155,157,159,162,163,165,167,170,171,173,176,177,
178,180,183,184,185,188,189,190,192,194,195,196,198,200,201,202,203,204,206,207,208,209,211,212,213,214,215,216,218,219,219,220,221,222,223,224,225,226,227,227,228,229,229,230,231,232,232,233,234,234,235,236,236,237,238,238,239,239,240,241,241,242,242,243,244,244,245,245,245,246,247,247,248,248,249,249,249,250,251,251,252,252,252,253,254,254,254,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255];return a.rgba(b,c,function(a,b,c,f){return[d[a],
d[b],d[c],f]})};a.screen=function(){var b,c,d,f,g,h,j;c=arguments[0];d=2<=arguments.length?q.call(arguments,1):[];j=i(d,227,12,169,0.2);d=j[0];g=j[1];f=j[2];b=j[3];h=j[4];return a.rgba(c,d,function(a,c,d,e){return[255-(255-a)*(255-g*h)/255,255-(255-c)*(255-f*h)/255,255-(255-d)*(255-b*h)/255,e]})};h=function(){var a,b,c,d,f,g,h;a=arguments[0];b=arguments[1];c=arguments[2];g=4<=arguments.length?q.call(arguments,3):[];h=n(a);a=h[0];d=h[2];h=p(a);a=h[0];f=h[1];j(function(){return f.putImageData(c.apply(null,
[d].concat(q.call(g))),0,0)});return j(b,a)};f=function(){var a,b;b=arguments[0];a=2<=arguments.length?q.call(arguments,1):[];return function(){var c,d,f;c=arguments[0];d=2<=arguments.length?q.call(arguments,1):[];f=i(d,a);d=f.shift();return h.apply(null,[c,d,b].concat(q.call(f)))}};a.binarize=f(ImageFilters.Binarize,0.5);a.boxBlur=f(ImageFilters.BoxBlur,3,3,2);a.gaussianBlur=f(ImageFilters.GaussianBlur,2);a.stackBlur=f(ImageFilters.StackBlur,6);a.brightness=f(ImageFilters.brightness,1);a.brightnessConstrastGimp=
f(ImageFilters.BrightnessContrastGimp,50,50);a.brightnessConstrastPhotoshop=f(ImageFilters.BrightnessContrastPhotoshop,50,50);a.Channels=function(a){return f(ImageFilters.Channels,"blue"===a||"b"===a?3:"green"===a||"g"===a?2:a)};a.colorTransform=f(ImageFilters.ColorTransformFilter,1,1,1,0,0,0);a.dither=f(ImageFilters.Dither,2);a.edge=f(ImageFilters.Edge);a.emboss=f(ImageFilters.Emboss);a.enrich=f(ImageFilters.Enrich);a.gamma=f(ImageFilters.Gamma,2);a.grayscale=f(ImageFilters.Grayscale);a.HSLAdjustment=
f(ImageFilters.HSLAdjustment,0,0,0);a.invert=f(ImageFilters.Invert);a.mosaic=f(ImageFilters.Mosaic,10);a.oil=f(ImageFilters.Oil,4,30);a.opacity=f(ImageFilters.OpacityFilter,10);a.posterize=f(ImageFilters.Posterize,8);a.sepia=f(ImageFilters.Sepia);a.sharpen=f(ImageFilters.Sharpen,3);a.solarize=f(ImageFilters.Solarize);a.twirl=f(ImageFilters.Twril,0.5,0.5,100,360);window.Canio=a}).call(this);
