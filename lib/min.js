(function(){(function(){var J;J=function(k,D,C,z,l){var g,e,o,j,c,h,d,n,q,i,B,a,s,f;e=2*l+1;q=l+1;a=C-1;i=0;B=[];c=0;for(g=256*e;c<g;)B[c]=c/e|0,c+=1;s=0;for(f=[];s<z;){n=j=e=g=0;o=s;h=i<<2;n+=q*k[h];j+=q*k[h+1];e+=q*k[h+2];g+=q*k[h+3];for(c=1;c<=l;)h=i+(c<C?c:a)<<2,n+=k[h],j+=k[h+1],e+=k[h+2],g+=k[h+3],c+=1;for(c=0;c<C;)h=o<<2,D[h]=B[n],D[h+1]=B[j],D[h+2]=B[e],D[h+3]=B[g],h=c+q,h>a&&(h=a),d=c-l,0>d&&(d=0),h=i+h<<2,d=i+d<<2,n+=k[h]-k[d],j+=k[h+1]-k[d+1],e+=k[h+2]-k[d+2],g+=k[h+3]-k[d+3],o+=z,c+=1;
i+=C;f.push(s+=1)}return f};return function(k,D,C,z){var l,g,e,o,j,c;o=k.data;j=k.width;e=k.height;k=this.utils.createImageData(j,e);l=k.data;c=this.utils.createImageData(j,e).data;for(g=0;g<z;)J(g?l:o,c,j,e,D),J(c,l,e,j,C),g+=1;return k}})();(function(){var J,k,D;J=function(){this.a=this.b=this.g=this.r=0;return this.next=null};k=[512,512,456,512,328,456,335,512,405,328,271,456,388,335,292,512,454,405,364,328,298,271,496,456,420,388,360,335,312,292,273,512,482,454,428,405,383,364,345,328,312,298,
284,271,259,496,475,456,437,420,404,388,374,360,347,335,323,312,302,292,282,273,265,512,497,482,468,454,441,428,417,405,394,383,373,364,354,345,337,328,320,312,305,298,291,284,278,271,265,259,507,496,485,475,465,456,446,437,428,420,412,404,396,388,381,374,367,360,354,347,341,335,329,323,318,312,307,302,297,292,287,282,278,273,269,265,261,512,505,497,489,482,475,468,461,454,447,441,435,428,422,417,411,405,399,394,389,383,378,373,368,364,359,354,350,345,341,337,332,328,324,320,316,312,309,305,301,298,
294,291,287,284,281,278,274,271,268,265,262,259,257,507,501,496,491,485,480,475,470,465,460,456,451,446,442,437,433,428,424,420,416,412,408,404,400,396,392,388,385,381,377,374,370,367,363,360,357,354,350,347,344,341,338,335,332,329,326,323,320,318,315,312,310,307,304,302,299,297,294,292,289,287,285,282,280,278,275,273,271,269,267,265,263,261,259];D=[9,11,12,13,13,14,14,15,15,15,15,16,16,16,16,17,17,17,17,17,17,17,18,18,18,18,18,18,18,18,18,19,19,19,19,19,19,19,19,19,19,19,19,19,19,20,20,20,20,20,
20,20,20,20,20,20,20,20,20,20,20,20,20,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,
24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24];return function(C,z){var l,g,e,o,j,c,h,d,n,q,i,B,a,s,f,u,v,w,x,t,A,p,r,I,E,M,F,b,N,K,G,L,y,H,m,O;F=C.width;M=C.height;h=this.Clone(C);d=h.data;f=void 0;l=z+z+1;L=F-1;B=M-1;r=z+1;G=r*(r+1)/2;b=K=new J;N=void 0;s=k[z];E=D[z];for(a=1;a<l;)b=b.next=new J,a===r&&(N=b),a+=1;b.next=K;for(H=O=m=0;H<M;){t=n=o=l=p=i=c=e=0;A=r*(x=d[m]);q=r*(w=d[m+1]);j=r*(v=d[m+2]);g=r*(u=d[m+3]);p+=G*x;i+=G*w;
c+=G*v;e+=G*u;b=K;for(a=0;a<r;)b.r=x,b.g=w,b.b=v,b.a=u,b=b.next,a+=1;for(a=1;a<r;)f=m+((L<a?L:a)<<2),p+=(b.r=x=d[f])*(I=r-a),i+=(b.g=w=d[f+1])*I,c+=(b.b=v=d[f+2])*I,e+=(b.a=u=d[f+3])*I,t+=x,n+=w,o+=v,l+=u,b=b.next,a+=1;a=K;b=N;for(y=0;y<F;)d[m]=p*s>>E,d[m+1]=i*s>>E,d[m+2]=c*s>>E,d[m+3]=e*s>>E,p-=A,i-=q,c-=j,e-=g,A-=a.r,q-=a.g,j-=a.b,g-=a.a,f=O+((f=y+z+1)<L?f:L)<<2,t+=a.r=d[f],n+=a.g=d[f+1],o+=a.b=d[f+2],l+=a.a=d[f+3],p+=t,i+=n,c+=o,e+=l,a=a.next,A+=x=b.r,q+=w=b.g,j+=v=b.b,g+=u=b.a,t-=x,n-=w,o-=v,
l-=u,b=b.next,m+=4,y+=1;O+=F;H+=1}for(y=0;y<F;){n=o=l=t=i=c=e=p=0;m=y<<2;A=r*(x=d[m]);q=r*(w=d[m+1]);j=r*(v=d[m+2]);g=r*(u=d[m+3]);p+=G*x;i+=G*w;c+=G*v;e+=G*u;b=K;for(a=0;a<r;)b.r=x,b.g=w,b.b=v,b.a=u,b=b.next,a+=1;f=F;for(a=1;a<=z;)m=f+y<<2,p+=(b.r=x=d[m])*(I=r-a),i+=(b.g=w=d[m+1])*I,c+=(b.b=v=d[m+2])*I,e+=(b.a=u=d[m+3])*I,t+=x,n+=w,o+=v,l+=u,b=b.next,a<B&&(f+=F),a+=1;m=y;a=K;b=N;for(H=0;H<M;)f=m<<2,d[f]=p*s>>E,d[f+1]=i*s>>E,d[f+2]=c*s>>E,d[f+3]=e*s>>E,p-=A,i-=q,c-=j,e-=g,A-=a.r,q-=a.g,j-=a.b,g-=
a.a,f=y+((f=H+r)<B?f:B)*F<<2,p+=t+=a.r=d[f],i+=n+=a.g=d[f+1],c+=o+=a.b=d[f+2],e+=l+=a.a=d[f+3],a=a.next,A+=x=b.r,q+=w=b.g,j+=v=b.b,g+=u=b.a,t-=x,n-=w,o-=v,l-=u,b=b.next,m+=F,H+=1;y+=1}return h}})()}).call(this);
